{"version":3,"sources":["webpack:///./src/components/metadata/MetadataList.vue?3543","webpack:///src/components/metadata/MetadataList.vue","webpack:///./src/components/metadata/MetadataList.vue?9390","webpack:///./src/components/metadata/MetadataList.vue","webpack:///./node_modules/core-js/modules/es.string.trim-end.js","webpack:///./node_modules/core-js/modules/es.string.match.js","webpack:///./src/services/svo/MetadataSearchFilter.js","webpack:///./src/components/metadata/Metadata.vue?cd72","webpack:///src/components/metadata/Metadata.vue","webpack:///./src/components/metadata/Metadata.vue?1060","webpack:///./src/components/metadata/Metadata.vue","webpack:///./src/components/metadata/MetadataDetail.vue?4b6a","webpack:///src/components/metadata/MetadataDetail.vue","webpack:///./src/components/metadata/MetadataDetail.vue?6979","webpack:///./src/components/metadata/MetadataDetail.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","paginator","loading","ref","ariaControl","items","metadataTableFields","metadataTableCaption","on","showMetadataDetailModal","scopedSlots","_u","key","fn","data","item","model","value","callback","$$v","selection","expression","data_location","offline","selectionEmpty","saveSelection","_v","_s","length","saveAll","searchOverlappingDatasets","staticClass","totalRows","pageSize","$set","metadataDetailModalTitle","metadataDetailModalMetadata","_e","overlappingDatasetsModalTitle","overlappingDatasetsModalSearchFilter","staticRenderFns","component","$","$trimEnd","end","forcedStringTrimMethod","FORCED","trimEnd","target","proto","forced","trimRight","fixRegExpWellKnownSymbolLogic","anObject","toLength","requireObjectCoercible","advanceStringIndex","regExpExec","MATCH","nativeMatch","maybeCallNative","regexp","O","matcher","undefined","call","RegExp","String","string","res","done","rx","S","global","fullUnicode","unicode","lastIndex","result","A","n","matchStr","MetadataSearchFilter","searchFilter","min","max","Array","isArray","tags","dateRange","search","searchParams","URLSearchParams","tag","append","set","toISOString","$event","preventDefault","updateSearchParams","apply","arguments","showOverlay","tagOptions","dataset","columns","imageURL","clearSearchFilter","cards","fields","filterIncludedFields"],"mappings":"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","file":"js/Metadata.722bd406.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-overlay',{attrs:{\"show\":_vm.paginator.loading,\"rounded\":\"sm\"}},[_c('b-table',{ref:\"metadataTable\",attrs:{\"id\":_vm.paginator.ariaControl,\"items\":_vm.paginator.items,\"fields\":_vm.metadataTableFields,\"caption\":_vm.metadataTableCaption,\"primary-key\":\"oid\",\"select-mode\":\"single\",\"small\":\"\",\"hover\":\"\",\"selectable\":\"\"},on:{\"row-selected\":_vm.showMetadataDetailModal},scopedSlots:_vm._u([{key:\"cell(checkbox)\",fn:function(data){return [_c('b-form-checkbox',{attrs:{\"value\":data.item,\"size\":\"lg\"},model:{value:(_vm.selection),callback:function ($$v) {_vm.selection=$$v},expression:\"selection\"}})]}},{key:\"cell(download_button)\",fn:function(data){return [_c('b-button',{attrs:{\"href\":data.value,\"target\":\"_blank\",\"title\":\"Download file\",\"size\":\"sm\",\"variant\":\"primary\",\"disabled\":data.item.data_location.offline}},[_c('b-icon',{attrs:{\"icon\":\"download\"}})],1)]}}])}),_c('b-button-toolbar',{attrs:{\"key-nav\":\"\"}},[_c('b-button',{attrs:{\"disabled\":_vm.selectionEmpty,\"variant\":\"primary\",\"title\":\"Select one or more metadata to create or update a data selection\"},on:{\"click\":_vm.saveSelection}},[_vm._v(\"Save selection (\"+_vm._s(_vm.selection.length)+\")\")]),_c('b-button',{attrs:{\"variant\":\"primary\",\"title\":\"Create or update a data selection with all metadata\"},on:{\"click\":_vm.saveAll}},[_vm._v(\"Save all\")]),_c('b-button',{attrs:{\"disabled\":_vm.selectionEmpty,\"title\":\"Select one or more metadata to search for overlapping data\"},on:{\"click\":_vm.searchOverlappingDatasets}},[_vm._v(\"Search overlapping\")]),_c('span',{staticClass:\"button-toolbar-spacer\"}),_c('b-pagination',{staticClass:\"mb-0\",attrs:{\"total-rows\":_vm.paginator.totalRows,\"per-page\":_vm.paginator.pageSize,\"aria-controls\":_vm.paginator.ariaControl,\"limit\":\"5\"},model:{value:(_vm.paginator.pageNumber),callback:function ($$v) {_vm.$set(_vm.paginator, \"pageNumber\", $$v)},expression:\"paginator.pageNumber\"}})],1)],1),_c('b-modal',{ref:\"metadataDetailModal\",attrs:{\"size\":\"md\",\"title\":_vm.metadataDetailModalTitle,\"hide-footer\":\"\",\"static\":\"\",\"lazy\":\"\"}},[(_vm.metadataDetailModalMetadata)?_c('metadata-detail',{attrs:{\"metadata\":_vm.metadataDetailModalMetadata}}):_vm._e()],1),_c('b-modal',{ref:\"overlappingDatasetsModal\",attrs:{\"size\":\"xl\",\"title\":_vm.overlappingDatasetsModalTitle,\"hide-footer\":\"\",\"static\":\"\",\"lazy\":\"\"}},[_c('dataset',{attrs:{\"initial-search-filter\":_vm.overlappingDatasetsModalSearchFilter}})],1),_c('data-selection-save',{ref:\"dataSelectionSave\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div>\n\t\t<b-overlay :show=\"paginator.loading\" rounded=\"sm\">\n\t\t\t<b-table\n\t\t\t\t:id=\"paginator.ariaControl\"\n\t\t\t\tref=\"metadataTable\"\n\t\t\t\t:items=\"paginator.items\"\n\t\t\t\t:fields=\"metadataTableFields\"\n\t\t\t\t:caption=\"metadataTableCaption\"\n\t\t\t\tprimary-key=\"oid\"\n\t\t\t\tselect-mode=\"single\"\n\t\t\t\tsmall\n\t\t\t\thover\n\t\t\t\tselectable\n\t\t\t\t@row-selected=\"showMetadataDetailModal\"\n\t\t\t>\n\t\t\t\t<template #cell(checkbox)=\"data\">\n\t\t\t\t\t<b-form-checkbox v-model=\"selection\" :value=\"data.item\" size=\"lg\"></b-form-checkbox>\n\t\t\t\t</template>\n\t\t\t\t<template #cell(download_button)=\"data\">\n\t\t\t\t\t<b-button :href=\"data.value\" target=\"_blank\" title=\"Download file\" size=\"sm\" variant=\"primary\" :disabled=\"data.item.data_location.offline\">\n\t\t\t\t\t\t<b-icon icon=\"download\"></b-icon>\n\t\t\t\t\t</b-button>\n\t\t\t\t</template>\n\t\t\t</b-table>\n\n\t\t\t<b-button-toolbar key-nav>\n\t\t\t\t<b-button :disabled=\"selectionEmpty\" variant=\"primary\" title=\"Select one or more metadata to create or update a data selection\" @click=\"saveSelection\"\n\t\t\t\t\t>Save selection ({{ selection.length }})</b-button\n\t\t\t\t>\n\t\t\t\t<b-button variant=\"primary\" title=\"Create or update a data selection with all metadata\" @click=\"saveAll\">Save all</b-button>\n\t\t\t\t<b-button :disabled=\"selectionEmpty\" title=\"Select one or more metadata to search for overlapping data\" @click=\"searchOverlappingDatasets\">Search overlapping</b-button>\n\t\t\t\t<span class=\"button-toolbar-spacer\"></span>\n\t\t\t\t<b-pagination v-model=\"paginator.pageNumber\" :total-rows=\"paginator.totalRows\" :per-page=\"paginator.pageSize\" :aria-controls=\"paginator.ariaControl\" limit=\"5\" class=\"mb-0\"></b-pagination>\n\t\t\t</b-button-toolbar>\n\t\t</b-overlay>\n\n\t\t<b-modal ref=\"metadataDetailModal\" size=\"md\" :title=\"metadataDetailModalTitle\" hide-footer static lazy>\n\t\t\t<metadata-detail v-if=\"metadataDetailModalMetadata\" :metadata=\"metadataDetailModalMetadata\"></metadata-detail>\n\t\t</b-modal>\n\n\t\t<b-modal ref=\"overlappingDatasetsModal\" size=\"xl\" :title=\"overlappingDatasetsModalTitle\" hide-footer static lazy>\n\t\t\t<dataset :initial-search-filter=\"overlappingDatasetsModalSearchFilter\"></dataset>\n\t\t</b-modal>\n\n\t\t<data-selection-save ref=\"dataSelectionSave\"></data-selection-save>\n\t</div>\n</template>\n\n<script>\nimport DatasetSearchFilter from '@/services/svo/DatasetSearchFilter';\nimport DataSelectionSave from '@/components/data_selection/DataSelectionSave';\nimport Dataset from '@/components/dataset/Dataset';\nimport MetadataDetail from './MetadataDetail';\n\nexport default {\n\tname: 'MetadataList',\n\tcomponents: {\n\t\tMetadataDetail,\n\t\tDataset,\n\t\tDataSelectionSave\n\t},\n\tprops: {\n\t\tdataset: { type: Object, required: true },\n\t\tsearchParams: { type: URLSearchParams, required: true },\n\t\tcolumns: { type: Array, required: true }\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tpaginator: this.$SVO.getPaginator(this.dataset.metadata.resource_uri),\n\t\t\tselection: [],\n\t\t\tmetadataDetailModalTitle: this.dataset.name,\n\t\t\tmetadataDetailModalMetadata: null,\n\t\t\toverlappingDatasetsModalSearchFilter: new DatasetSearchFilter(),\n\t\t\toverlappingDatasetsModalTitle: 'Datasets'\n\t\t};\n\t},\n\tcomputed: {\n\t\tmetadataTableFields: function() {\n\t\t\treturn [\n\t\t\t\t{ key: 'checkbox', label: '' },\n\t\t\t\t{\n\t\t\t\t\tkey: 'download_button',\n\t\t\t\t\tlabel: 'Download',\n\t\t\t\t\tformatter: (value, index, metadata) => (metadata.data_location.offline ? null : metadata.data_location.file_url)\n\t\t\t\t},\n\t\t\t\t...this.columns,\n\t\t\t\t{ key: 'tags', label: 'Tags', formatter: tags => tags.map(tag => tag.name).join(', ') }\n\t\t\t];\n\t\t},\n\t\tmetadataTableCaption: function() {\n\t\t\treturn this.paginator.items.length > 0 ? 'Click on any row to see data details' : 'No metadata correspond to your search criteria';\n\t\t},\n\t\tselectionEmpty: function() {\n\t\t\treturn this.selection.length == 0;\n\t\t}\n\t},\n\twatch: {\n\t\tsearchParams: {\n\t\t\thandler: 'updatePaginator',\n\t\t\timmediate: true\n\t\t}\n\t},\n\tmethods: {\n\t\tupdatePaginator: function(searchParams) {\n\t\t\tthis.selection = [];\n\t\t\ttry {\n\t\t\t\tthis.paginator.searchParams = searchParams;\n\t\t\t\tthis.paginator.loadPage(1);\n\t\t\t} catch (error) {\n\t\t\t\tthis.$displayErrorMessage(this.$SVO.parseError(error));\n\t\t\t}\n\t\t},\n\t\tshowMetadataDetailModal: function(selectedRows) {\n\t\t\t// selectedRows is always a list, but it will be empty when clearing selected rows\n\t\t\tif (selectedRows.length > 0) {\n\t\t\t\tthis.metadataDetailModalMetadata = selectedRows[0];\n\t\t\t\t// Clear the selection so that the row can be selected again\n\t\t\t\tthis.$refs.metadataTable.clearSelected();\n\t\t\t\t// Make sure the component is rendered before calling show\n\t\t\t\tthis.$nextTick(function() {\n\t\t\t\t\tthis.$refs.metadataDetailModal.show();\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tsaveSelection: function() {\n\t\t\tlet searchParams = new URLSearchParams();\n\t\t\tthis.selection.forEach(metadata => searchParams.append('oid__in', metadata.oid));\n\t\t\tthis.$refs.dataSelectionSave.save(this.dataset, searchParams.toString());\n\t\t},\n\t\tsaveAll: function() {\n\t\t\tthis.$refs.dataSelectionSave.save(this.dataset, this.searchParams.toString());\n\t\t},\n\t\tsearchOverlappingDatasets: function() {\n\t\t\tthis.overlappingDatasetsModalTitle = `Datasets overlapping selected ${this.dataset.name} data`;\n\t\t\tthis.overlappingDatasetsModalSearchFilter = new DatasetSearchFilter({\n\t\t\t\tdateRange: {\n\t\t\t\t\tmin: new Date(Math.min(...this.selection.map(m => new Date(m.date_beg)))),\n\t\t\t\t\tmax: new Date(Math.max(...this.selection.map(m => new Date(m.date_end))))\n\t\t\t\t},\n\t\t\t\tsearch: this.selection.map(m => `(date_beg__lt = ${m.date_end} and date_end__gt = ${m.date_beg})`).join(' or ')\n\t\t\t});\n\t\t\tthis.$refs.overlappingDatasetsModal.show();\n\t\t}\n\t}\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetadataList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetadataList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MetadataList.vue?vue&type=template&id=3c202fd2&\"\nimport script from \"./MetadataList.vue?vue&type=script&lang=js&\"\nexport * from \"./MetadataList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $trimEnd = require('../internals/string-trim').end;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\nvar FORCED = forcedStringTrimMethod('trimEnd');\n\nvar trimEnd = FORCED ? function trimEnd() {\n  return $trimEnd(this);\n// eslint-disable-next-line es/no-string-prototype-trimstart-trimend -- safe\n} : ''.trimEnd;\n\n// `String.prototype.{ trimEnd, trimRight }` methods\n// https://tc39.es/ecma262/#sec-string.prototype.trimend\n// https://tc39.es/ecma262/#String.prototype.trimright\n$({ target: 'String', proto: true, forced: FORCED }, {\n  trimEnd: trimEnd,\n  trimRight: trimEnd\n});\n","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar toLength = require('../internals/to-length');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\n// @@match logic\nfixRegExpWellKnownSymbolLogic('match', function (MATCH, nativeMatch, maybeCallNative) {\n  return [\n    // `String.prototype.match` method\n    // https://tc39.es/ecma262/#sec-string.prototype.match\n    function match(regexp) {\n      var O = requireObjectCoercible(this);\n      var matcher = regexp == undefined ? undefined : regexp[MATCH];\n      return matcher !== undefined ? matcher.call(regexp, O) : new RegExp(regexp)[MATCH](String(O));\n    },\n    // `RegExp.prototype[@@match]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@match\n    function (string) {\n      var res = maybeCallNative(nativeMatch, this, string);\n      if (res.done) return res.value;\n\n      var rx = anObject(this);\n      var S = String(string);\n\n      if (!rx.global) return regExpExec(rx, S);\n\n      var fullUnicode = rx.unicode;\n      rx.lastIndex = 0;\n      var A = [];\n      var n = 0;\n      var result;\n      while ((result = regExpExec(rx, S)) !== null) {\n        var matchStr = String(result[0]);\n        A[n] = matchStr;\n        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);\n        n++;\n      }\n      return n === 0 ? null : A;\n    }\n  ];\n});\n","/* The SearchFilter is the interface between the API and the search form data */\n\nexport default class MetadataSearchFilter {\n\ttags = [];\n\tdateRange = { min: null, max: null };\n\n\tconstructor(searchFilter) {\n\t\tif (searchFilter) {\n\t\t\tif (Array.isArray(searchFilter.tags)) {\n\t\t\t\tthis.tags = [...searchFilter.tags];\n\t\t\t}\n\t\t\tif (searchFilter.dateRange) {\n\t\t\t\tthis.dateRange = {\n\t\t\t\t\tmin: searchFilter.dateRange.min,\n\t\t\t\t\tmax: searchFilter.dateRange.max\n\t\t\t\t};\n\t\t\t}\n\t\t\tthis.search = searchFilter.search;\n\t\t}\n\t}\n\n\tgetSearchParams() {\n\t\tlet searchParams = new URLSearchParams();\n\n\t\tfor (const tag of this.tags) {\n\t\t\tsearchParams.append('tags__in', tag);\n\t\t}\n\n\t\tif (this.dateRange.min) {\n\t\t\tsearchParams.set('date_end__gte', this.dateRange.min.toISOString());\n\t\t}\n\n\t\tif (this.dateRange.max) {\n\t\t\tsearchParams.set('date_beg__lte', this.dateRange.max.toISOString());\n\t\t}\n\n\t\tif (this.search) {\n\t\t\tsearchParams.set('search', this.search);\n\t\t}\n\n\t\treturn searchParams;\n\t}\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-row',[_c('b-col',{attrs:{\"cols\":\"4\"}},[_c('b-form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.updateSearchParams.apply(null, arguments)}}},[_c('base-datetime-range',{attrs:{\"label\":\"Observation date\",\"min-label\":\"Start\",\"max-label\":\"End\"},model:{value:(_vm.searchFilter.dateRange),callback:function ($$v) {_vm.$set(_vm.searchFilter, \"dateRange\", $$v)},expression:\"searchFilter.dateRange\"}}),_c('b-overlay',{attrs:{\"show\":_vm.showOverlay,\"rounded\":\"sm\"}},[_c('b-form-group',{attrs:{\"label\":\"Tags\",\"label-for\":\"tags\"}},[_c('b-form-select',{attrs:{\"id\":\"tags\",\"options\":_vm.tagOptions,\"multiple\":\"\"},model:{value:(_vm.searchFilter.tags),callback:function ($$v) {_vm.$set(_vm.searchFilter, \"tags\", $$v)},expression:\"searchFilter.tags\"}})],1)],1),_c('b-button',{attrs:{\"type\":\"submit\",\"variant\":\"primary\"}},[_vm._v(\"Search\")])],1)],1),_c('b-col',{attrs:{\"cols\":\"8\"}},[_c('metadata-list',{attrs:{\"dataset\":_vm.dataset,\"search-params\":_vm.searchParams,\"columns\":_vm.columns}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<b-row>\n\t\t<b-col cols=\"4\">\n\t\t\t<b-form @submit.prevent=\"updateSearchParams\">\n\t\t\t\t<base-datetime-range v-model=\"searchFilter.dateRange\" label=\"Observation date\" min-label=\"Start\" max-label=\"End\"></base-datetime-range>\n\t\t\t\t<b-overlay :show=\"showOverlay\" rounded=\"sm\">\n\t\t\t\t\t<b-form-group label=\"Tags\" label-for=\"tags\">\n\t\t\t\t\t\t<b-form-select id=\"tags\" v-model=\"searchFilter.tags\" :options=\"tagOptions\" multiple></b-form-select>\n\t\t\t\t\t</b-form-group>\n\t\t\t\t</b-overlay>\n\t\t\t\t<b-button type=\"submit\" variant=\"primary\">Search</b-button>\n\t\t\t</b-form>\n\t\t</b-col>\n\t\t<b-col cols=\"8\">\n\t\t\t<metadata-list :dataset=\"dataset\" :search-params=\"searchParams\" :columns=\"columns\"></metadata-list>\n\t\t</b-col>\n\t</b-row>\n</template>\n\n<script>\nimport MetadataList from './MetadataList';\nimport MetadataSearchFilter from '@/services/svo/MetadataSearchFilter';\n\nexport default {\n\tname: 'Metadata',\n\tcomponents: {\n\t\tMetadataList\n\t},\n\tprops: {\n\t\tdataset: { type: Object, required: true },\n\t\tinitialSearchFilter: { type: Object, required: false, default: null }\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tsearchFilter: new MetadataSearchFilter(this.initialSearchFilter),\n\t\t\tsearchParams: new URLSearchParams(),\n\t\t\ttagOptions: [],\n\t\t\tcolumns: [\n\t\t\t\t{ label: 'Observation date', key: 'date_beg', formatter: this.$utils.formatDate },\n\t\t\t\t{ label: 'Wavelength', key: 'wavemin' }\n\t\t\t]\n\t\t};\n\t},\n\tcreated: async function() {\n\t\t// Fetch and create the options of the form select\n\t\tthis.showOverlay = true;\n\t\tthis.loadTagOptions();\n\t\tthis.showOverlay = false;\n\t},\n\tmethods: {\n\t\tupdateSearchParams: function() {\n\t\t\tthis.searchParams = this.searchFilter.getSearchParams();\n\t\t},\n\t\tloadTagOptions: async function() {\n\t\t\ttry {\n\t\t\t\tlet tags = await this.$SVO.tag.getAll({ dataset: this.dataset.name });\n\t\t\t\tthis.tagOptions = tags.map(tag => ({ value: tag.name, text: tag.name }));\n\t\t\t} catch (error) {\n\t\t\t\tthis.$displayErrorMessage(this.$SVO.parseError(error));\n\t\t\t}\n\t\t}\n\t}\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Metadata.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Metadata.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Metadata.vue?vue&type=template&id=17021f7e&\"\nimport script from \"./Metadata.vue?vue&type=script&lang=js&\"\nexport * from \"./Metadata.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-img',{attrs:{\"src\":_vm.imageURL,\"center\":\"\",\"fluid-grow\":\"\",\"alt\":\"Data thumbnail\"}}),_c('b-form-group',{staticClass:\"my-2\"},[_c('b-input-group',[_c('b-form-input',{attrs:{\"type\":\"search\",\"placeholder\":\"Filter metadata\",\"debounce\":\"250\"},model:{value:(_vm.searchFilter),callback:function ($$v) {_vm.searchFilter=$$v},expression:\"searchFilter\"}}),_c('b-input-group-append',[_c('b-button',{attrs:{\"disabled\":!_vm.searchFilter},on:{\"click\":_vm.clearSearchFilter}},[_vm._v(\"Clear\")])],1)],1)],1),_c('b-table',{attrs:{\"items\":_vm.cards,\"fields\":_vm.fields,\"filter\":_vm.searchFilter,\"filter-included-fields\":_vm.filterIncludedFields,\"primary-key\":\"id\",\"sticky-header\":\"\",\"show-empty\":\"\",\"small\":\"\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div>\n\t\t<b-img :src=\"imageURL\" center fluid-grow alt=\"Data thumbnail\"></b-img>\n\t\t<b-form-group class=\"my-2\">\n\t\t\t<b-input-group>\n\t\t\t\t<b-form-input v-model=\"searchFilter\" type=\"search\" placeholder=\"Filter metadata\" debounce=\"250\"></b-form-input>\n\t\t\t\t<b-input-group-append>\n\t\t\t\t\t<b-button :disabled=\"!searchFilter\" @click=\"clearSearchFilter\">Clear</b-button>\n\t\t\t\t</b-input-group-append>\n\t\t\t</b-input-group>\n\t\t</b-form-group>\n\t\t<b-table :items=\"cards\" :fields=\"fields\" :filter=\"searchFilter\" :filter-included-fields=\"filterIncludedFields\" primary-key=\"id\" sticky-header show-empty small> </b-table>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: 'MetadataDetail',\n\tprops: {\n\t\tmetadata: { type: Object, required: true }\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tsearchFilter: ''\n\t\t};\n\t},\n\tcomputed: {\n\t\timageURL: function() {\n\t\t\treturn this.metadata.data_location.thumbnail_url ? this.metadata.data_location.thumbnail_url : require('@/assets/no_preview_available.jpg');\n\t\t},\n\t\tfitsHeader: function() {\n\t\t\treturn this.metadata.fits_header ? this.metadata.fits_header.trimEnd() : '';\n\t\t},\n\t\tfields: function() {\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tkey: 'text',\n\t\t\t\t\tlabel: this.fitsHeader.length > 0 ? 'FITS header' : 'Metadata'\n\t\t\t\t}\n\t\t\t];\n\t\t},\n\t\tfilterIncludedFields: function() {\n\t\t\treturn ['text'];\n\t\t},\n\t\tcards: function() {\n\t\t\tif (this.fitsHeader.length > 0) {\n\t\t\t\treturn this.fitsHeader.match(/[^]{1,80}/g).map((text, id) => ({ id, text }));\n\t\t\t} else {\n\t\t\t\treturn Object.entries(this.metadata)\n\t\t\t\t\t.filter(([, value]) => !(value instanceof Object))\n\t\t\t\t\t.map(([key, value], id) => ({ id, text: `${key} = ${value}` }));\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\tclearSearchFilter: function() {\n\t\t\tthis.searchFilter = '';\n\t\t}\n\t}\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetadataDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetadataDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MetadataDetail.vue?vue&type=template&id=3ba59404&\"\nimport script from \"./MetadataDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./MetadataDetail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}