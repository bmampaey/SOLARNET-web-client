{"version":3,"file":"js/LyraLevel2.8f311fbd.js","mappings":"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","sources":["webpack://svo/./src/components/metadata/LyraLevel2.vue?2842","webpack://svo/src/components/metadata/LyraLevel2.vue","webpack://svo/./src/components/metadata/LyraLevel2.vue?1967","webpack://svo/./src/components/metadata/LyraLevel2.vue","webpack://svo/./src/components/metadata/TagSelector.vue?a922","webpack://svo/src/components/metadata/TagSelector.vue","webpack://svo/./src/components/metadata/TagSelector.vue?68d8","webpack://svo/./src/components/metadata/TagSelector.vue","webpack://svo/./src/components/metadata/MetadataMixin.js","webpack://svo/./src/services/svo/MetadataSearchFilter.js"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-row',[_c('b-col',{attrs:{\"cols\":\"4\"}},[_c('b-form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.updateSearchParams.apply(null, arguments)}}},[_c('base-datetime-range',{attrs:{\"label\":\"Observation date\",\"min-label\":\"Start\",\"max-label\":\"End\"},model:{value:(_vm.searchFilter.dateRange),callback:function ($$v) {_vm.$set(_vm.searchFilter, \"dateRange\", $$v)},expression:\"searchFilter.dateRange\"}}),(_vm.tags.length)?_c('tag-selector',{attrs:{\"tags\":_vm.tags},model:{value:(_vm.searchFilter.tags),callback:function ($$v) {_vm.$set(_vm.searchFilter, \"tags\", $$v)},expression:\"searchFilter.tags\"}}):_vm._e(),_c('b-button',{attrs:{\"type\":\"submit\",\"variant\":\"primary\"}},[_vm._v(\"Search\")])],1)],1),_c('b-col',{attrs:{\"cols\":\"8\"}},[_c('metadata-list',{attrs:{\"dataset\":_vm.dataset,\"search-params\":_vm.searchParams,\"tags\":_vm.tags,\"keywords\":_vm.keywords,\"default-columns\":_vm.defaultColumns}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<b-row>\n\t\t<b-col cols=\"4\">\n\t\t\t<b-form @submit.prevent=\"updateSearchParams\">\n\t\t\t\t<base-datetime-range v-model=\"searchFilter.dateRange\" label=\"Observation date\" min-label=\"Start\" max-label=\"End\"></base-datetime-range>\n\t\t\t\t<tag-selector v-if=\"tags.length\" v-model=\"searchFilter.tags\" :tags=\"tags\"></tag-selector>\n\t\t\t\t<b-button type=\"submit\" variant=\"primary\">Search</b-button>\n\t\t\t</b-form>\n\t\t</b-col>\n\t\t<b-col cols=\"8\">\n\t\t\t<metadata-list :dataset=\"dataset\" :search-params=\"searchParams\" :tags=\"tags\" :keywords=\"keywords\" :default-columns=\"defaultColumns\"></metadata-list>\n\t\t</b-col>\n\t</b-row>\n</template>\n\n<script>\nimport MetadataMixin from './MetadataMixin';\n\nexport default {\n\tname: 'LyraLevel2',\n\tmixins: [MetadataMixin],\n\tdata: function() {\n\t\treturn {\n\t\t\tdefaultColumns: [\n\t\t\t\t{ label: 'Observation start date', key: 'date_beg', formatter: this.$utils.formatDate },\n\t\t\t\t{ label: 'Observation end date', key: 'date_end', formatter: this.$utils.formatDate }\n\t\t\t]\n\t\t};\n\t}\n};\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LyraLevel2.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LyraLevel2.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LyraLevel2.vue?vue&type=template&id=02754674&\"\nimport script from \"./LyraLevel2.vue?vue&type=script&lang=js&\"\nexport * from \"./LyraLevel2.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-form-group',{attrs:{\"label\":\"Tags\",\"label-for\":_vm.inputId}},[_c('b-form-select',{attrs:{\"id\":_vm.inputId,\"value\":_vm.value,\"options\":_vm.tagOptions,\"multiple\":\"\"},on:{\"input\":function($event){return _vm.$emit('input', $event.target.value)}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<b-form-group label=\"Tags\" :label-for=\"inputId\">\n\t\t<b-form-select :id=\"inputId\" :value=\"value\" :options=\"tagOptions\" multiple @input=\"$emit('input', $event.target.value)\"></b-form-select>\n\t</b-form-group>\n</template>\n\n<script>\nexport default {\n\tname: 'TagSelector',\n\tprops: {\n\t\tvalue: { type: Array, required: true },\n\t\ttags: { type: Array, required: true }\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tinputId: this.$utils.getUniqueId()\n\t\t};\n\t},\n\tcomputed: {\n\t\ttagOptions: function() {\n\t\t\treturn this.tags.map(tag => ({ value: tag.name, text: tag.name }));\n\t\t}\n\t}\n};\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TagSelector.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TagSelector.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TagSelector.vue?vue&type=template&id=2c08fbea&\"\nimport script from \"./TagSelector.vue?vue&type=script&lang=js&\"\nexport * from \"./TagSelector.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import MetadataList from './MetadataList';\nimport TagSelector from './TagSelector';\nimport MetadataSearchFilter from '@/services/svo/MetadataSearchFilter';\n\nexport default {\n\tcomponents: {\n\t\tMetadataList,\n\t\tTagSelector\n\t},\n\tprops: {\n\t\tdataset: { type: Object, required: true },\n\t\tinitialSearchFilter: { type: Object, required: false, default: null }\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tsearchFilter: new MetadataSearchFilter(this.initialSearchFilter),\n\t\t\tsearchParams: new URLSearchParams(),\n\t\t\ttags: [],\n\t\t\tkeywords: [],\n\t\t\tdefaultColumns: [\n\t\t\t\t{ label: 'Observation date', key: 'date_beg', formatter: this.$utils.formatDate },\n\t\t\t\t{ label: 'Wavelength', key: 'wavemin' }\n\t\t\t]\n\t\t};\n\t},\n\tcreated: function() {\n\t\t// Fetch and create the options of the form select\n\t\tthis.loadTags();\n\t\tthis.loadKeywords();\n\t},\n\tmethods: {\n\t\tupdateSearchParams: function() {\n\t\t\tthis.searchParams = this.searchFilter.getSearchParams();\n\t\t},\n\t\tloadTags: async function() {\n\t\t\ttry {\n\t\t\t\tthis.tags = await this.$SVO.tag.getAll({ dataset: this.dataset.name });\n\t\t\t} catch (error) {\n\t\t\t\tthis.$displayErrorMessage(this.$SVO.parseError(error));\n\t\t\t}\n\t\t},\n\t\tloadKeywords: async function() {\n\t\t\ttry {\n\t\t\t\tthis.keywords = await this.$SVO.keyword.getAll({ dataset__name: this.dataset.name });\n\t\t\t} catch (error) {\n\t\t\t\tthis.$displayErrorMessage(this.$SVO.parseError(error));\n\t\t\t}\n\t\t}\n\t}\n};\n","/* The SearchFilter is the interface between the API and the search form data */\n\nexport default class MetadataSearchFilter {\n\ttags = [];\n\tdateRange = { min: null, max: null };\n\n\tconstructor(searchFilter) {\n\t\tif (searchFilter) {\n\t\t\tif (Array.isArray(searchFilter.tags)) {\n\t\t\t\tthis.tags = [...searchFilter.tags];\n\t\t\t}\n\t\t\tif (searchFilter.dateRange) {\n\t\t\t\tthis.dateRange = {\n\t\t\t\t\tmin: searchFilter.dateRange.min,\n\t\t\t\t\tmax: searchFilter.dateRange.max\n\t\t\t\t};\n\t\t\t}\n\t\t\tthis.search = searchFilter.search;\n\t\t}\n\t}\n\n\tgetSearchParams() {\n\t\tlet searchParams = new URLSearchParams();\n\n\t\tfor (const tag of this.tags) {\n\t\t\tsearchParams.append('tags__in', tag);\n\t\t}\n\n\t\tif (this.dateRange.min) {\n\t\t\tsearchParams.set('date_end__gte', this.dateRange.min.toISOString());\n\t\t}\n\n\t\tif (this.dateRange.max) {\n\t\t\tsearchParams.set('date_beg__lte', this.dateRange.max.toISOString());\n\t\t}\n\n\t\tif (this.search) {\n\t\t\tsearchParams.set('search', this.search);\n\t\t}\n\n\t\treturn searchParams;\n\t}\n}\n"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","$event","preventDefault","updateSearchParams","apply","arguments","model","value","searchFilter","callback","$$v","$set","expression","tags","_e","_v","dataset","searchParams","keywords","defaultColumns","staticRenderFns","component","inputId","tagOptions","$emit","target","components","MetadataList","TagSelector","props","type","Object","required","initialSearchFilter","default","data","MetadataSearchFilter","URLSearchParams","label","key","formatter","$utils","formatDate","created","loadTags","loadKeywords","methods","getSearchParams","$SVO","tag","getAll","name","$displayErrorMessage","parseError","keyword","dataset__name","min","max","Array","isArray","dateRange","search","append","set","toISOString"],"sourceRoot":""}