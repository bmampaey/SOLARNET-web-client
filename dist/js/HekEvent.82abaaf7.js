"use strict";(self["webpackChunkweb_client"]=self["webpackChunkweb_client"]||[]).push([[5850,470,1495,2289,8899,2836,2154,8882,4592,3196,2171,7496,6094,7790,7738,2904,8526,2940,7499,2270,8016,3286,8180,9452,2272,4028],{6927:function(e,t,a){a.d(t,{Z:function(){return u}});var i=function(){var e=this,t=e._self._c;return t("nav",{attrs:{role:"navigation","aria-label":"Pagination","aria-controls":e.ariaControls}},[t("b-button",{staticClass:"mr-1",attrs:{disabled:1==e.currentPage,size:e.size,variant:"outline-dark",title:e.ariaLabel(e.jumpBackwardPage),"aria-label":e.ariaLabel(e.jumpBackwardPage)},on:{click:function(t){return e.selectPage(e.jumpBackwardPage)}}},[e._v(" « ")]),t("b-button-group",{attrs:{size:e.size}},e._l(e.pages,(function(a){return t("b-button",{key:a,attrs:{disabled:e.currentPage==a,variant:a==e.currentPage?"dark":"outline-dark",title:e.ariaLabel(a),"aria-label":e.ariaLabel(a),"aria-current":a==e.currentPage?"page":"false"},on:{click:function(t){return e.selectPage(a)}}},[e._v(" "+e._s(a)+" ")])})),1),t("b-button",{staticClass:"ml-1",attrs:{disabled:e.currentPage==e.pageCount,size:e.size,variant:"outline-dark",title:e.ariaLabel(e.jumpForwardPage),"aria-label":e.ariaLabel(e.jumpForwardPage)},on:{click:function(t){return e.selectPage(e.jumpForwardPage)}}},[e._v(" » ")])],1)},n=[],r=(a(7658),{name:"Pagination",props:{pageNumber:{type:Number,required:!0},pageCount:{type:Number,required:!0},pageJump:{type:Number,default:10},pageDisplayed:{type:Number,default:5},ariaControls:{type:String,default:null},size:{type:String,default:"md"}},data(){return{currentPage:this.pageNumber}},computed:{jumpBackwardPage(){return Math.max(1,this.currentPage-this.pageJump)},jumpForwardPage(){return Math.min(this.pageCount,this.currentPage+this.pageJump)},firstPage(){let e=Math.ceil(this.pageDisplayed/2);return Math.max(1,this.currentPage-e+1)},lastPage(){return Math.min(this.pageCount,this.firstPage+this.pageDisplayed-1)},pages(){let e=[];for(let t=this.firstPage;t<=this.lastPage;t++)e.push(t);return e}},watch:{pageNumber(e){this.currentPage=e}},methods:{selectPage(e){e!=this.currentPage&&(this.currentPage=e,this.$emit("change",this.currentPage))},ariaLabel(e){return e==this.currentPage?null:`Go to Page ${e}`}}}),s=r,l=a(1001),o=(0,l.Z)(s,i,n,!1,null,null,null),u=o.exports},700:function(e,t,a){a.d(t,{_:function(){return s},Z:function(){return g}});var i=function(){var e=this,t=e._self._c;return t("b-modal",{attrs:{id:e.modalId,"aria-controls":e.ariaControls,size:"sm",title:"Table display settings","cancel-title":"Reset"},on:{show:e.initialiseSettings,ok:e.updateSettings,cancel:function(t){return t.preventDefault(),e.resetSettings.apply(null,arguments)}}},[t("b-form-group",{attrs:{"label-for":e.pageSizeSelectorId,label:"Number of rows to display"}},[t("b-form-spinbutton",{attrs:{id:e.pageSizeSelectorId,min:e.settings.pageSizeMinimum,max:e.settings.pageSizeMaximum,step:10,size:"sm"},model:{value:e.settings.pageSize,callback:function(t){e.$set(e.settings,"pageSize",t)},expression:"settings.pageSize"}})],1),e.showOrderingSelector?t("b-form-group",{attrs:{"label-for":e.orderingSelectorId,label:"Select sorting column"}},[t("b-form-select",{attrs:{id:e.orderingSelectorId,options:e.settings.orderingOptions},model:{value:e.settings.ordering,callback:function(t){e.$set(e.settings,"ordering",t)},expression:"settings.ordering"}})],1):e._e(),e.showColumnSelector?t("b-form-group",{staticClass:"column-selector",attrs:{label:"Display/hide columns"},scopedSlots:e._u([{key:"default",fn:function({ariaDescribedby:a}){return[t("b-form-checkbox-group",{attrs:{options:e.settings.columnOptions,"aria-describedby":a,switches:"",stacked:""},model:{value:e.settings.columns,callback:function(t){e.$set(e.settings,"columns",t)},expression:"settings.columns"}})]}}],null,!1,1125934306)}):e._e()],1)},n=[],r=a(6318);class s{constructor(e){(0,r.Z)(this,"pageSize",null),(0,r.Z)(this,"pageSizeMinimum",10),(0,r.Z)(this,"pageSizeMaximum",null),(0,r.Z)(this,"pageSizeStep",10),(0,r.Z)(this,"ordering",null),(0,r.Z)(this,"orderingOptions",[]),(0,r.Z)(this,"columns",[]),(0,r.Z)(this,"columnOptions",[]),e&&(Number.isInteger(e.pageSize)&&(this.pageSize=e.pageSize),Number.isInteger(e.pageSizeMinimum)&&(this.minimum=e.pageSizeMinimum),Number.isInteger(e.pageSizeMaximum)&&(this.maximum=e.pageSizeMaximum),Number.isInteger(e.pageSizeStep)&&(this.step=e.pageSizeStep),this.ordering=e.ordering,Array.isArray(e.orderingOptions)&&(this.orderingOptions=[...e.orderingOptions]),Array.isArray(e.columns)&&(this.columns=[...e.columns]),Array.isArray(e.columnOptions)&&(this.columnOptions=[...e.columnOptions]))}}var l={name:"TableSettingsModal",props:{defaultSettings:{type:s,required:!0},modalId:{type:String,default:null},ariaControls:{type:String,default:null}},data(){return{settings:new s,pageSizeSelectorId:this.$utils.getUniqueId(),orderingSelectorId:this.$utils.getUniqueId()}},computed:{showOrderingSelector(){return this.settings.orderingOptions?.length},showColumnSelector(){return this.settings.columnOptions?.length}},methods:{initialiseSettings(){this.settings=new s(this.defaultSettings)},updateSettings(){this.$emit("change",this.settings)},resetSettings(){this.settings=new s(this.defaultSettings)}}},o=l,u=a(1001),d=(0,u.Z)(o,i,n,!1,null,"15e23313",null),g=d.exports},394:function(e,t,a){a.r(t),a.d(t,{default:function(){return Z}});var i=function(){var e=this,t=e._self._c;return t("b-row",[t("b-col",{attrs:{cols:"12",lg:"4"}},[t("b-card",{staticClass:"mb-3",attrs:{"no-body":""}},[t("b-card-header",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:e.eventFilterId,expression:"eventFilterId"}],attrs:{"header-tag":"header",title:"Click to show/hide the event filters"}},[e._v(" Filter events "),t("b-button",{staticClass:"hide-btn",attrs:{size:"sm","aria-controls":e.eventFilterId}},[e._v("Hide")]),t("b-button",{staticClass:"show-btn",attrs:{size:"sm","aria-controls":e.eventFilterId}},[e._v("Show")])],1),t("b-collapse",{attrs:{id:e.eventFilterId,visible:""}},[t("b-card-body",[t("hek-event-form",{model:{value:e.searchFilter,callback:function(t){e.searchFilter=t},expression:"searchFilter"}})],1)],1)],1)],1),t("b-col",{attrs:{cols:"12",lg:"8"}},[t("hek-event-list",{attrs:{"search-filter":e.searchFilter}})],1)],1)},n=[],r=function(){var e=this,t=e._self._c;return t("b-form",{on:{submit:function(t){return t.preventDefault(),e.updateSearchFilter.apply(null,arguments)}}},[t("b-form-group",{attrs:{label:"Event types","label-for":"event-type"}},[t("b-form-select",{attrs:{id:"event-type",options:e.searchFilter.eventTypeOptions,multiple:""},model:{value:e.searchFilter.eventType,callback:function(t){e.$set(e.searchFilter,"eventType",t)},expression:"searchFilter.eventType"}})],1),t("datetime-range",{attrs:{label:"Event time","min-label":"Start","max-label":"End"},model:{value:e.searchFilter.dateRange,callback:function(t){e.$set(e.searchFilter,"dateRange",t)},expression:"searchFilter.dateRange"}}),t("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Search")])],1)},s=[],l=a(6318),o=a(4286);class u{constructor(e){(0,l.Z)(this,"eventType",[]),(0,l.Z)(this,"dateRange",{min:null,max:null}),(0,l.Z)(this,"eventTypeOptions",Object.entries(o.iq).map((([e,t])=>({value:e,text:t})))),e&&(Array.isArray(e.eventType)&&(this.eventType=[...e.eventType]),e.dateRange&&(this.dateRange={min:e.dateRange.min,max:e.dateRange.max}))}getSearchParams(){let e=new URLSearchParams(o.vH);return this.eventType&&this.eventType.length>0&&e.set("event_type",this.eventType.join(",")),this.dateRange.min&&e.set("event_starttime",this.dateRange.min.toISOString()),this.dateRange.max&&e.set("event_endtime",this.dateRange.max.toISOString()),e}}var d={name:"HekEventForm",props:{value:{type:u,required:!0}},data(){return{searchFilter:new u(this.value)}},methods:{updateSearchFilter(){this.$emit("input",new u(this.searchFilter))}}},g=d,p=a(1001),c=(0,p.Z)(g,r,s,!1,null,null,null),m=c.exports,h=function(){var e=this,t=e._self._c;return t("div",[t("b-overlay",{attrs:{show:e.paginator.loading,rounded:"sm"}},[t("b-button-toolbar",{staticClass:"mb-3",attrs:{"key-nav":"","aria-label":"Control table displayed rows and columns"}},[t("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:e.tableSettingsModalId,expression:"tableSettingsModalId"}],attrs:{size:"sm",variant:"outline-secondary",title:"Change table display settings"}},[e._v("Settings")]),t("span",{staticClass:"button-toolbar-spacer"}),t("pagination",{staticClass:"mb-0",attrs:{"page-number":e.paginator.pageNumber,"page-count":e.paginator.pageCount,"page-jump":1,"page-displayed":3,"aria-controls":e.tableId},on:{change:e.updatePageNumber}})],1),t("b-table",{ref:"eventTable",attrs:{id:e.tableId,items:e.paginator.items,fields:e.eventTableFields,caption:e.eventTableCaption,"primary-key":"id","select-mode":"single",responsive:"",small:"",hover:"",selectable:""},on:{"row-selected":e.showEventDetailModal},scopedSlots:e._u([{key:"cell(checkbox)",fn:function(a){return[t("b-form-checkbox",{attrs:{value:a.item,size:"lg"},model:{value:e.selection,callback:function(t){e.selection=t},expression:"selection"}})]}}])}),t("b-button-toolbar",{attrs:{"key-nav":"","aria-label":"Actions on displayed and selected rows"}},[t("b-button",{attrs:{disabled:e.selectionEmpty,variant:"primary",title:"Select one or more event to search for overlapping data"},on:{click:e.showOverlappingDatasetModal}},[e._v("Search overlapping ("+e._s(e.selection.length)+")")])],1)],1),t("b-modal",{ref:"eventDetailModal",attrs:{size:"md",title:e.eventDetailModalTitle,"hide-footer":"",static:"",lazy:""}},[e.eventDetailModalEvent?t("hek-event-detail",{attrs:{event:e.eventDetailModalEvent}}):e._e()],1),t("b-modal",{ref:"overlappingDatasetsModal",attrs:{size:"full",title:e.overlappingDatasetsModalTitle,"hide-footer":"",static:"",lazy:""}},[t("dataset",{attrs:{"initial-search-filter":e.overlappingDatasetsModalSearchFilter}})],1),t("table-settings-modal",{attrs:{"default-settings":e.tableSettings,"modal-id":e.tableSettingsModalId,"aria-controls":e.tableId},on:{change:e.updateTableSettings}})],1)},v=[],b=a(9569),f=a(4243),S=a(6927),y=a(700),_=function(){var e=this,t=e._self._c;return t("div",[t("b-img",{attrs:{center:"",fluid:"",src:e.event.thumbnailUrl,alt:"Event thumbnail"}}),t("dl",{staticClass:"dl-horizontal"},[t("dt",[e._v("Start time")]),t("dd",[e._v(e._s(e.$utils.formatDate(e.event.startTime)))]),t("dt",[e._v("End time")]),t("dd",[e._v(e._s(e.$utils.formatDate(e.event.endTime)))]),t("dt",[e._v("Recognition method")]),t("dd",[e._v(e._s(e.event.frm_name))]),t("dt",[e._v("Identifier name")]),t("dd",[e._v(e._s(e.event.frm_identifier))])]),t("a",{attrs:{href:e.event.detailUrl,target:"_blank"}},[e._v("See more details")])],1)},M=[],k={name:"HekEventDetail",props:{event:{type:Object,required:!0}}},w=k,I=(0,p.Z)(w,_,M,!1,null,null,null),P=I.exports,z={name:"HekEventList",components:{HekEventDetail:P,Dataset:f["default"],Pagination:S.Z,TableSettingsModal:y.Z},props:{searchFilter:{type:u,required:!0}},data(){let e=this.$HEK.getPaginator(),t=new y._({pageSize:e.pageSize,pageSizeMinimum:o.dZ.MINIMUM_PAGESIZE,pageSizeMaximum:o.dZ.MAXIMUM_PAGESIZE,ordering:e.ordering,orderingOptions:[{value:"event_type",text:"Event type"},{value:"startTime",text:"Start time"},{value:"endTime",text:"End time"},{value:"frm_name",text:"Method"}]});return{tableId:this.$utils.getUniqueId(),paginator:e,selection:[],eventDetailModalEvent:null,eventDetailModalTitle:"",overlappingDatasetsModalSearchFilter:new b.Z,overlappingDatasetsModalTitle:"Datasets",tableSettings:t,tableSettingsModalId:this.$utils.getUniqueId()}},computed:{eventTableFields(){return[{key:"checkbox",label:""},{key:"type",label:"Type"},{key:"startTime",label:"Start time",formatter:this.$utils.formatDate},{key:"endTime",label:"End time",formatter:this.$utils.formatDate},{key:"frm_name",label:"Method"}]},eventTableCaption(){return this.paginator.items.length>0?"Click on any row to see the event details":"No event correspond to your search criteria"},selectionEmpty(){return 0==this.selection.length}},watch:{searchFilter:{handler:"updatePaginator",immediate:!0}},methods:{updatePaginator(e){this.paginator.searchParams=e.getSearchParams();try{this.paginator.loadPage(1),this.selection=[]}catch(t){this.$displayErrorMessage(t)}},updatePageNumber(e){this.paginator.loadPage(e)},updateTableSettings(e){this.paginator.pageSize==e.pageSize&&this.paginator.ordering==e.ordering||(this.paginator.pageSize=e.pageSize,this.paginator.ordering=e.ordering,this.paginator.loadPage(1)),this.tableSettings=e},showEventDetailModal(e){e.length>0&&(this.eventDetailModalEvent=e[0],this.eventDetailModalTitle=this.eventDetailModalEvent.type,this.$refs.eventTable.clearSelected(),this.$nextTick((function(){this.$refs.eventDetailModal.show()})))},showOverlappingDatasetModal(){let e=new Set(this.selection.map((e=>e.type)));this.overlappingDatasetsModalTitle=`Datasets overlapping selected ${Array.from(e).join(", ")} events`,this.overlappingDatasetsModalSearchFilter=new b.Z({dateRange:{min:new Date(Math.min(...this.selection.map((e=>e.startTime)))),max:new Date(Math.max(...this.selection.map((e=>e.endTime))))},search:this.selection.map((e=>`(date_beg__lte = ${e.endTime.toISOString()} and date_end__gte = ${e.startTime.toISOString()})`)).join(" or ")}),this.$refs.overlappingDatasetsModal.show()}}},T=z,D=(0,p.Z)(T,h,v,!1,null,null,null),x=D.exports,E={name:"HekEvent",components:{HekEventForm:m,HekEventList:x},props:{initialSearchFilter:{type:u,required:!1,default:null}},data(){return{searchFilter:new u(this.initialSearchFilter),eventFilterId:this.$utils.getUniqueId()}}},F=E,C=(0,p.Z)(F,i,n,!1,null,null,null),Z=C.exports},5152:function(e,t,a){a.r(t),t["default"]={default:"Default","AIA level 1":"AiaLevel1",CRISP:"Crisp",CHROMIS:"Chromis","EIT level 0":"EitLevel0","EIT synoptic":"EitSynoptic","EUI level 1":"EuiLevel2","EUI level 2":"EuiLevel2","EUVI level 0":"EuviLevel0","GAIA DEM":"GaiaDem","HMI magnetogram":"HmiMagnetogram","SWAP level 1":"SwapLevel1","LYRA level 2":"LyraLevel2","LYRA level 3":"LyraLevel2","XRT level 1":"XrtLevel1"}}}]);
//# sourceMappingURL=HekEvent.82abaaf7.js.map