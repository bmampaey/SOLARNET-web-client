<!doctype html>
<html ng-app="DatasetApp">
<head>
	<meta charset="utf-8">
	
	<!-- For bootstrap -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<!-- style sheets -->
	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
	<link rel="stylesheet" href="/static/angular_multi_select/angular-multi-select.css">
	
	<!-- Libs -->
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular-animate.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular-resource.js"></script>	
	<script src="//angular-ui.github.io/bootstrap/ui-bootstrap-tpls-1.1.2.js"></script>
	<script src="/static/angular_multi_select/angular-multi-select.js"></script>
	
	<!-- dataset module -->
	<script src="/static/dataset/dataset.module.js"></script>
	<script src="/static/dataset/dataset.resources.js"></script>
	<script src="/static/dataset/dataset.controller.js"></script>

</head>
<body class="container-fluid">
<div ng-controller="DatasetController" class="row">
	<div class="col-md-4">
		<form>
			<div class="form-group">
				<label for="instruments">Instrument:</label>
				<multi-select
					id="instruments"
					input-model="instruments"
					output-model="selectedInstruments"
					button-label="name"
					item-label="name"
					tick-property="checked"
					helper-elements=""
					group-property="multiSelectGroup"
				/>
				
			</div>
			<div class="form-group">
				<label for="characteristics">Characteristics:</label>
				<multi-select
					id="characteristics"
					input-model="characteristics"
					output-model="selectedCharacteristics"
					button-label="name"
					item-label="name"
					tick-property="checked"
					helper-elements=""
					group-property="multiSelectGroup"
				/>
			</div>
			<div class="form-group">
				<label for="tags">Tags:</label>			
				<multi-select
					id="tags"
					input-model="tags"
					output-model="selectedTags"
					button-label="name"
					item-label="name"
					tick-property="checked"
					helper-elements=""
					group-property="multiSelectGroup"
				/>
			</div>
			<div class="form-group">
				<label for="start_date">Start Date:</label>
				<div class="input-group">
					<input type="text" id="start_date" class="form-control" datepicker-popup="{{date_format}}" ng-model="start_date" is-open="date_pickers['start_date']" show-weeks="false" starting-day="1">
					<span class="input-group-btn">
						<button type="button" class="btn btn-default" ng-click="open_date_picker($event, 'start_date')">
							<span class="glyphicon glyphicon-calendar">
							</span>
						</button>
					</span>
				</div>
			</div>
			<div class="form-group">
				<label for="end_date">End Date:</label>
				<div class="input-group">
					<input type="text" id="end_date" class="form-control" datepicker-popup="{{date_format}}" ng-model="end_date" is-open="date_pickers['end_date']" show-weeks="false" starting-day="1">
					<span class="input-group-btn">
						<button type="button" class="btn btn-default" ng-click="open_date_picker($event, 'end_date')">
							<span class="glyphicon glyphicon-calendar">
							</span>
						</button>
					</span>
				</div>
			</div>
			<button ng-click="update_datasets()" class="btn btn-primary btn-md">Search</button>
		</form>
	</div>

	<div class="col-md-8">
		<table class="table table-hover table-responsive">
			<tr>
				<th>Dataset</th>
				<th># Items</th>
				<th>Instrument</th>
				<th>Telescope</th>
				<th>Characteristics</th>
			</tr>
			<tr ng-repeat="dataset in datasets" ng-click="open_dataset(dataset)">
				<td>{{dataset.name}}</td>
				<td>{{dataset.number_items}}</td>
				<td>{{dataset.instrument}}</td>
				<td>{{dataset.telescope}}</td>
				<td>{{dataset.characteristics.join(', ')}}</td>
			</tr>
		</table>
	</div>
</div>
<div>
	<uib-accordion close-others="true">
		<uib-accordion-group ng-repeat="dataset in opened_datasets" is-open="opened_accordion == dataset">
			<uib-accordion-heading>
				{{ dataset.name }}
				<span popover="{{dataset.description}}" popover-placement="right" popover-trigger="mouseenter" class="glyphicon glyphicon-info-sign"></span>
				<span class="pull-right glyphicon glyphicon-remove-sign" ng-click="close_dataset(dataset)"></span>
			</uib-accordion-heading>
			{{ dataset.name }}
		</uib-accordion-group>
	</uib-accordion>
</div>

</body>
</html>